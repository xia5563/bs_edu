function addClassToActivePage(){var e=$("meta[name='pageIndex']");if(0!=e.length){var t=e.attr("content");$("li[pageIndex="+t+"]").addClass("active")}}function isOnSmallScreen(e,t){return e<t}function animateNavbarOnScroll(){function e(){n.css({opacity:"1"})}function t(){n.css({opacity:a})}var n=$(".cx-navRow");if(0!=n.length){var i=n.offset().top,s=$(".cx-bslogoOverlap"),a=.2;$(window).scroll(function(){var o=$(window).scrollTop();if(i<=o){var c=o-i;if(n.css({top:c+"px"}),s.hasClass("cx-bslogoOverlap")){if(s.switchClass("cx-bslogoOverlap","cx-bslogoSmall",400),isOnSmallScreen(screenWidth,smScreenWidth))return;n.css({opacity:a}),n.on("mouseenter",e),n.on("mouseleave",t)}}else if(n.css({top:"0px"}),s.hasClass("cx-bslogoSmall")){if(s.switchClass("cx-bslogoSmall","cx-bslogoOverlap",400),isOnSmallScreen(screenWidth,smScreenWidth))return;n.css({opacity:1}),n.off("mouseenter",e),n.off("mouseleave",t)}})}}function animateCxbox(){function e(){var e=$(this),t=e.siblings(".cx-box"),i=n.not(e).not(t);n.stop(!0,!1),n.animate({width:c,height:d},x,function(){e.animate({width:l+"px",height:g+"px"},x),t.animate({width:h+"px",height:g+"px"},x),i.animate({height:u+"px"},x)})}function t(){$(this);n.stop(!0,!1),n.animate({width:c,height:d},x)}var n=$(".cx-box");if(0!=n.length){var i=$(".cx-boxContainer"),s=i.css("width"),a=parseInt(s.replace("px","")),o=a*(400/1170),c=n.css("width"),r=parseInt(c.replace("px","")),l=r+o-2,h=r-o,d=n.css("height"),T=parseInt(d.replace("px","")),g=T+100,u=T-150,x=1e3;n.on("mouseenter",e),n.on("mouseleave",t)}}function animatePTETestAnswerGroup(){var e,t=$(".cx-PTETestReadingBtn, .cx-PTETestSpeakingBtn, .cx-PTETestWritingBtn, .cx-PTETestListeningBtn");t.on("click",function(){for(var t=$(this).attr("class"),n=t.split(" "),i=0,s=n.length;i<s;i++)n[i].indexOf("PTETest")>0&&(e=n[i].replace("Btn",""));$("."+e).toggle("slide",{direction:"up"},500)})}function animatePTETestFeedback(){var e,t,n=$(".cx-PTETestFeedback"),i=$(".cx-PTETestAnswerGroup input"),s=$(".cx-PTETestAnswerTypeA");$("#cx-PTETestSubmitBtn").on("click",function(){e=$(".cx-PTETestAnswerGroup :checked"),t=e.not(s),i.parent().removeClass("cx-PTETestAnswerTypeAHighlighted cx-PTETestAnswerTypeBHighlighted"),n.show("slide",{direction:"up"},1e3,showPTETestResult)}),$("#cx-PTETestShowAnswerBtn").on("click",function(){s.parent().addClass("cx-PTETestAnswerTypeAHighlighted"),t.parent().addClass("cx-PTETestAnswerTypeBHighlighted")}),$("#cx-PTETestResetBtn").on("click",function(){n.hide("slide",{direction:"up"},1e3),i.removeAttr("checked"),i.parent().removeClass("cx-PTETestAnswerTypeAHighlighted cx-PTETestAnswerTypeBHighlighted")})}function getPTETestResult(){var e=$(".cx-PTETestAnswerGroup").length,t=$(".cx-PTETestAnswerTypeA:checked").length,n={allQuestions:0,rightOnes:0,total:0,reading:0,speaking:0,writing:0,listening:0};return n.allQuestions=e,n.rightOnes=t,n.total=Math.round(100*t/e),n.reading=getPartialScore(".cx-PTETestReadingAnswerGroup"),n.speaking=getPartialScore(".cx-PTETestSpeakingAnswerGroup"),n.writing=getPartialScore(".cx-PTETestWritingAnswerGroup"),n.listening=getPartialScore(".cx-PTETestListeningAnswerGroup"),n}function getPartialScore(e){var t,n=$(e).length,i=$(e+"  .cx-PTETestAnswerTypeA:checked").length;return n>0&&(t=i/n,t=Math.round(100*t)/100),t}function showPTETestResult(){if(0!=$(".cx-PTETestAnswerGroup :radio").length){var e=getPTETestResult();showPartialResult("Reading",e.reading),showPartialResult("Speaking",e.speaking),showPartialResult("Writing",e.writing),showPartialResult("Listening",e.listening),$("#cx-PTETestScoreRightAnswers").text(e.rightOnes),$("#cx-PTETestScoreAllQuestions").text(e.allQuestions),animateNumbers(0,e.total,$("#cx-PTETestScore"))}}function showPartialResult(e,t){var n=$(".cx-PTETest"+e+"Feedback"),i=n.prev();t*=100,i.text(e+": "+t+"%"),0==t?i.addClass("cx-PTETestFeedbackTextHighlighted"):i.removeClass("cx-PTETestFeedbackTextHighlighted"),n.css({width:0}).delay(500).animate({width:t+"%"},1e3,"linear")}function animateNumbers(e,t,n){e>t||(n.html(e),e++,window.setTimeout(function(){animateNumbers(e,t,n)},40))}function toggleVideo(){$(".cx-btn-video").click(function(){var e=$("#cx-hidden-div"),t=$("#cx-btn-for-hidden-div");"none"==e.css("display")?e.show("fold",{},1500,function(){t.text("Hide video.");var e=t.offset().top;$("html,body").animate({scrollTop:e},600)}):(t.text("Show video."),e.hide("fold",{},1500))})}function animateImg(){var e=$(".cx-animateImg");if(0!=e.length){var t=$(".cx-imgOne"),n=$(".cx-imgTwo");e.hover(function(){t.finish(),n.finish(),t.hide("slide",{direction:"left"},1e3,function(){n.show("slide",{direction:"right"},1e3)})},function(){t.finish(),n.finish(),n.hide("slide",{direction:"left"},1e3,function(){t.show("slide",{direction:"right"},1e3)})})}}var screenWidth,smScreenWidth;$(document).ready(function(){screenWidth=$(window).width(),smScreenWidth=768,addClassToActivePage(),animateNavbarOnScroll(),isOnSmallScreen(screenWidth,smScreenWidth)||animateCxbox(),animatePTETestAnswerGroup(),animatePTETestFeedback()});